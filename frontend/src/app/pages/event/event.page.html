<ion-header>
  <ion-toolbar color="primary">
    <ion-buttons slot="start">
      <ion-back-button [icon]="null">{{ 'CORE.actions.cancel' | translate }}</ion-back-button>
    </ion-buttons>
    <ion-title>{{ event?.title }}</ion-title>
    <!--Mirar si el usuari es cos tecnic amb *ngIf-->
    <ion-buttons *ngIf="(ListConv != null && segmentModel !== 'analisi')" slot="end">
      <ion-button (click)="editEvent()">{{ 'CORE.actions.edit' | translate }}</ion-button>
    </ion-buttons>
  </ion-toolbar>
  <ion-toolbar>
    <ion-segment value="info" [(ngModel)]="segmentModel">
      <ion-segment-button value="info">
        <ion-label> {{ 'EVENT.info' | translate }} </ion-label>
      </ion-segment-button>
      <ion-segment-button *ngIf="event?.type === 'match'" value="players">
        <ion-label>{{ 'EVENT.convocados' | translate }}</ion-label>
      </ion-segment-button>
      <ion-segment-button *ngIf="event?.type === 'match'" value="analisi">
        <ion-label>{{ 'EVENT.analisi' | translate }}</ion-label>
      </ion-segment-button>
      <ion-segment-button value="fotos">
        <ion-label>{{ 'EVENT.fotos' | translate }}</ion-label>
      </ion-segment-button>
    </ion-segment>
  </ion-toolbar>
</ion-header>

<ion-content>
  <div *ngIf="segmentModel === 'info'">
    <div class="ion-padding">
      <ion-item *ngIf="event?.type === 'match'" class="rivalInfo">
        <ion-label>Rival: {{ event?.rival }}</ion-label>
      </ion-item>
      
      <ion-item lines="none">
        <ion-label>{{ event?.startTime | date: 'EEEE, dd MMM yyyy' }}</ion-label> 
      </ion-item>

      <ion-item class="subTime">
        <ion-label class="smallText"> {{ 'CORE.verbs.from' | translate }} {{ event?.startTime | date: 'HH:mm' }} {{ 'CORE.verbs.to' | translate }} {{ event?.endTime | date: 'HH:mm' }}</ion-label>
      </ion-item>

      <ion-item *ngIf="event?.type === 'training'" >
        <ion-textarea rows="3" [disabled]="true">{{ event?.description }}</ion-textarea>
      </ion-item>
      
      <ion-item lines="none">
        <ion-label>{{ event?.location?.name }}</ion-label>
      </ion-item>
    </div>

    <ion-button *ngIf="this.event?.location?.name!=''" class="directionsButton" (click)="GoogleDirections()" color="primary" expand="block">{{ 'EVENT.howToGet' | translate }}</ion-button>
    <div *ngIf="this.event?.location?.name!=''" #map id="map"></div>
  </div>

  <div *ngIf="segmentModel === 'players'">
    <div class="ion-padding">
      <div *ngIf="ListConv != null">
        <ion-list>
          <ion-item *ngFor="let conv of ListConv">
            <ion-label> {{ conv }} </ion-label>
          </ion-item>
        </ion-list>
      </div>


      <div *ngIf="ListConv == null">
        <div class="centerText">
          <p>{{ 'EVENT.message_no_convocados' | translate }}</p>
        </div>
        <!--Mirar si el usuari és cos tecnic amb *ngIf-->
        <div class="centerButton">
          <ion-button (click)="editEvent()">{{ 'EVENT.new_list' | translate }}</ion-button>
        </div>
      </div>
    </div>
  </div> 

  <div *ngIf="segmentModel === 'analisi'">

    <div *ngIf="file">
      <ion-item class="paddingLabel">
        <ion-img src="../../../assets/icon/pdf.png"></ion-img>
        <ion-label> {{ file_name }}</ion-label>
      </ion-item>

      <ion-fab class="buttons" vertical="bottom" slot="fixed" color="primary">
        <ion-button (click)="updateFile()">{{ 'CORE.actions.edit' | translate }}</ion-button>
        <ion-button (click)="deleteFile()" class="separation">{{ 'CORE.actions.delete' | translate }}</ion-button>
      </ion-fab>

    </div>

    <div *ngIf="!file">
      <div class="centerText">
        <p> {{ 'EVENT.no_inform' | translate }}</p>
      </div>
      <!--Mirar si el usuari és cos tecnic amb *ngIf-->
      <div class="centerButton">
        <ion-button (click)="uploadFile()"> {{ 'EVENT.uploadfile' | translate }} </ion-button>
      </div>
    </div>

  </div> 

  <div *ngIf="segmentModel === 'fotos'">
    <ion-grid>
      <ion-row>
        <ion-col *ngFor="let img of [1,2,3,4]; let i=index;">
            <ion-thumbnail item-center (click)="seeImage(img)"> 
              <ion-img [src]="'../assets/match_images/'+img+'.jpg'"></ion-img>
            </ion-thumbnail>
        </ion-col>
      </ion-row>
    </ion-grid>

    <ion-fab vertical="bottom" horizontal="end" slot="fixed" color="primary">
      <ion-fab-button (click)="goToaddTactic(img)">
        <ion-icon name="add"></ion-icon>
      </ion-fab-button>
    </ion-fab>

  </div> 
</ion-content>
